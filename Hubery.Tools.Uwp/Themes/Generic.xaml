<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:htuc="using:Hubery.Tools.Uwp.Controls"
    xmlns:hcucs="using:Hubery.Tools.Uwp.Controls.Setting"
    xmlns:hcucloading="using:Hubery.Tools.Uwp.Controls.Loading"
    xmlns:htudlg="using:Hubery.Tools.Uwp.Controls.Dialog"
    xmlns:converters="using:Hubery.Tools.Uwp.Converters"
    xmlns:controls="using:Microsoft.Toolkit.Uwp.UI.Controls"
    xmlns:muxc="using:Microsoft.UI.Xaml.Controls">

    <converters:BooleanConverter x:Key="BooleanConverter"/>
    <converters:DateFormatConverter x:Key="DateFormatConverter"/>
    <converters:DateParseConverter x:Key="DateParseConverter"/>
    <converters:TimestampConverter x:Key="TimestampConverter"/>
    <converters:IsNullConverter x:Key="IsNullConverter"/>
    <converters:IsNullToValueConverter x:Key="IsNullToValueConverter"/>
    <converters:NumCompareConverter x:Key="NumCompareConverter"/>
    <converters:NumToSendTipConverter x:Key="NumToSendTipConverter"/>
    <converters:AncestorConverter x:Key="AncestorConverter"/>
    <converters:IsEqualConverter x:Key="IsEqualConverter" />
    <converters:MathConverter x:Key="MathConverter"/>
    <converters:BooleanToValueConverter x:Key="BooleanToValueConverter"/>
    <converters:IsStrEmptyConverter x:Key="IsStrEmptyConverter"/>
    <converters:IsStrEmptyToValueConverter x:Key="IsStrEmptyToValueConverter"/>
    <converters:IsDarkColorToValueConverter x:Key="IsDarkColorToValueConverter"/>
    <converters:IsDarkThemeToValueConverter x:Key="IsDarkThemeToValueConverter"/>
    <converters:BackColorToForeColorConverter x:Key="BackColorToForeColorConverter"/>
    <converters:TestConverter x:Key="TestConverter"/>
    <converters:ThicknessConverter x:Key="ThicknessConverter"/>
    <converters:NoBreakConverter x:Key="NoBreakConverter"/>

    <Style TargetType="Button" x:Key="DialogPrimaryButtonStyle" BasedOn="{StaticResource AccentButtonStyle}"/>
    <Style TargetType="Button" x:Key="DialogSecondaryButtonStyle" BasedOn="{StaticResource ButtonRevealStyle}"/>

    <Style TargetType="htudlg:LayoutDialog">
        <Setter Property="Padding" Value="0 10 0 14" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="htudlg:LayoutDialog">
                    <Border>
                        <Border.Background>
                            <SolidColorBrush Color="{ThemeResource SystemAltHighColor}"
                                             Opacity="0.4"/>
                        </Border.Background>

                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="ButtonsVisibilityStates">
                                <VisualState x:Name="AllVisible" />
                                <VisualState x:Name="NoneVisible">
                                    <VisualState.Setters>
                                        <Setter Target="PrimaryButton.Visibility" Value="Collapsed" />
                                        <Setter Target="SecondaryButton.Visibility" Value="Collapsed" />
                                        <Setter Target="CloseButton.Visibility" Value="Collapsed" />
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="PrimaryVisible">
                                    <VisualState.Setters>
                                        <Setter Target="SecondaryButton.Visibility" Value="Collapsed" />
                                        <Setter Target="CloseButton.Visibility" Value="Collapsed" />
                                        <Setter Target="PrimaryButton.(Grid.Column)" Value="0" />
                                        <Setter Target="PrimaryButton.(Grid.ColumnSpan)" Value="6" />
                                        <Setter Target="PrimaryButton.Margin" Value="0"/>
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="SecondaryVisible">
                                    <VisualState.Setters>
                                        <Setter Target="PrimaryButton.Visibility" Value="Collapsed" />
                                        <Setter Target="CloseButton.Visibility" Value="Collapsed" />
                                        <Setter Target="SecondaryButton.(Grid.Column)" Value="0" />
                                        <Setter Target="SecondaryButton.(Grid.ColumnSpan)" Value="6" />
                                        <Setter Target="SecondaryButton.Margin" Value="0"/>
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="CloseVisible">
                                    <VisualState.Setters>
                                        <Setter Target="PrimaryButton.Visibility" Value="Collapsed" />
                                        <Setter Target="SecondaryButton.Visibility" Value="Collapsed" />
                                        <Setter Target="CloseButton.(Grid.Column)" Value="0" />
                                        <Setter Target="CloseButton.(Grid.ColumnSpan)" Value="6" />
                                        <Setter Target="CloseButton.Margin" Value="0"/>
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="PrimaryAndSecondaryVisible">
                                    <VisualState.Setters>
                                        <Setter Target="CloseButton.Visibility" Value="Collapsed" />
                                        <Setter Target="PrimaryButton.(Grid.Column)" Value="0" />
                                        <Setter Target="PrimaryButton.(Grid.ColumnSpan)" Value="3" />
                                        <Setter Target="SecondaryButton.(Grid.Column)" Value="3" />
                                        <Setter Target="SecondaryButton.(Grid.ColumnSpan)" Value="3" />
                                        <Setter Target="PrimaryButton.Margin" Value="0 0 6 0"/>
                                        <Setter Target="SecondaryButton.Margin" Value="6 0 0 0"/>
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="PrimaryAndCloseVisible">
                                    <VisualState.Setters>
                                        <Setter Target="SecondaryButton.Visibility" Value="Collapsed" />
                                        <Setter Target="PrimaryButton.(Grid.Column)" Value="0" />
                                        <Setter Target="PrimaryButton.(Grid.ColumnSpan)" Value="3" />
                                        <Setter Target="CloseButton.(Grid.Column)" Value="3" />
                                        <Setter Target="CloseButton.(Grid.ColumnSpan)" Value="3" />
                                        <Setter Target="PrimaryButton.Margin" Value="0 0 6 0"/>
                                        <Setter Target="CloseButton.Margin" Value="6 0 0 0"/>
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="SecondaryAndCloseVisible">
                                    <VisualState.Setters>
                                        <Setter Target="PrimaryButton.Visibility" Value="Collapsed" />
                                        <Setter Target="SecondaryButton.(Grid.Column)" Value="0" />
                                        <Setter Target="SecondaryButton.(Grid.ColumnSpan)" Value="3" />
                                        <Setter Target="CloseButton.(Grid.Column)" Value="3" />
                                        <Setter Target="CloseButton.(Grid.ColumnSpan)" Value="3" />
                                        <Setter Target="SecondaryButton.Margin" Value="0 0 6 0"/>
                                        <Setter Target="CloseButton.Margin" Value="6 0 0 0"/>
                                    </VisualState.Setters>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="DefaultButtonStates">
                                <VisualState x:Name="NoDefaultButton" />
                                <VisualState x:Name="PrimaryAsDefaultButton">
                                    <VisualState.Setters>
                                        <Setter Target="PrimaryButton.Style" Value="{ThemeResource DialogPrimaryButtonStyle}" />
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="SecondaryAsDefaultButton">
                                    <VisualState.Setters>
                                        <Setter Target="SecondaryButton.Style" Value="{ThemeResource DialogPrimaryButtonStyle}" />
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="CloseAsDefaultButton">
                                    <VisualState.Setters>
                                        <Setter Target="CloseButton.Style" Value="{ThemeResource DialogPrimaryButtonStyle}" />
                                    </VisualState.Setters>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>

                        <controls:DropShadowPanel BlurRadius="10"
                                                  ShadowOpacity="0.6"
                                                  OffsetX="0"
                                                  OffsetY="0"
                                                  Color="{ThemeResource SystemBaseHighColor}"
                                                  IsMasked="True"
                                                  Margin="20"
                                                  HorizontalAlignment="Center"
                                                  VerticalAlignment="Center">
                            <Border Background="{ThemeResource ApplicationPageBackgroundThemeBrush}"
                                    BorderThickness="1"
                                    Padding="24 18"
                                    MinHeight="{ThemeResource ContentDialogMinHeight}"
                                    MinWidth="{ThemeResource ContentDialogMinWidth}">
                                <Border.BorderBrush>
                                    <SolidColorBrush Color="{ThemeResource SystemBaseHighColor}" Opacity="0.3"/>
                                </Border.BorderBrush>

                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="auto" />
                                        <RowDefinition Height="*" />
                                        <RowDefinition Height="auto" />
                                    </Grid.RowDefinitions>

                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="auto" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="auto" />
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="{TemplateBinding Title}"
                                                   VerticalAlignment="Top"
                                                   FontSize="{TemplateBinding TitleFontSize}"/>
                                        <ContentControl Content="{TemplateBinding TitleExtension}"
                                                        Grid.Column="1"
                                                        HorizontalAlignment="Stretch"
                                                        VerticalAlignment="Stretch"
                                                        HorizontalContentAlignment="Stretch"
                                                        VerticalContentAlignment="Stretch"/>
                                        <htuc:PathButton Margin="10 0 -10 0"
                                                         Grid.Column="2"
                                                         x:Name="ExitButton"
                                                         Foreground="Red"
                                                         VerticalAlignment="Top"
                                                         ToolTipService.ToolTip="�˳�"
                                                         Visibility="{Binding RelativeSource={RelativeSource Mode=TemplatedParent},Path=IsExitButtonVisible,Mode=OneWay,Converter={StaticResource BooleanConverter}}"
                                                         Data="M571.904 501.76L885.76 187.904c15.872-15.872 15.872-41.984 0-57.856l-1.536-1.536c-15.872-15.872-41.984-15.872-57.856 0L512 442.368 198.144 128c-15.872-15.872-41.984-15.872-57.856 0l-1.536 1.536a40.192 40.192 0 0 0 0 57.856L452.608 501.76 138.752 815.616c-15.872 15.872-15.872 41.984 0 57.856l1.536 1.536c15.872 15.872 41.984 15.872 57.856 0L512 561.152l313.856 313.856c15.872 15.872 41.984 15.872 57.856 0l1.536-1.536c15.872-15.872 15.872-41.984 0-57.856L571.904 501.76z"/>
                                    </Grid>

                                    <ContentControl Content="{TemplateBinding Content}"
                                            Margin="{TemplateBinding Padding}"
                                            Grid.Row="1"
                                            HorizontalContentAlignment="Stretch"
                                            VerticalContentAlignment="Stretch"
                                            HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                            VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>

                                    <Grid Grid.Row="2">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <Button Grid.Column="0"
                                                Grid.ColumnSpan="2"
                                                Style="{ThemeResource DialogSecondaryButtonStyle}"
                                                HorizontalAlignment="Stretch"
                                                Content="{TemplateBinding PrimaryButtonText}"
                                                x:Name="PrimaryButton"
                                                Margin="0 0 6 0"/>

                                        <Button Grid.Column="2"
                                                Grid.ColumnSpan="2"
                                                Style="{ThemeResource DialogSecondaryButtonStyle}"
                                                HorizontalAlignment="Stretch"
                                                Content="{TemplateBinding SecondaryButtonText}"
                                                x:Name="SecondaryButton"
                                                Margin="6 0"/>

                                        <Button Grid.Column="4"
                                                Grid.ColumnSpan="2"
                                                Style="{ThemeResource DialogSecondaryButtonStyle}"
                                                HorizontalAlignment="Stretch"
                                                Content="{TemplateBinding CloseButtonText}"
                                                x:Name="CloseButton"
                                                Margin="6 0 0 0"/>
                                    </Grid>

                                    <hcucloading:PartialLoading IsLoading="{TemplateBinding IsLoading}"
                                                            Grid.RowSpan="3"/>
                                </Grid>
                            </Border>
                        </controls:DropShadowPanel>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="htuc:LayoutTeachingTip">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="htuc:LayoutTeachingTip">
                    <Grid>
                        <Border Background="{ThemeResource ApplicationPageBackgroundThemeBrush}"
                                Opacity="{TemplateBinding BackgroundOpacity}"
                                IsHitTestVisible="{Binding RelativeSource={RelativeSource Mode=TemplatedParent},Path=Clickable,Mode=OneWay,Converter={StaticResource BooleanConverter},ConverterParameter=true}"/>

                        <muxc:TeachingTip PreferredPlacement="{TemplateBinding PreferredPlacement}"
                                          Target="{TemplateBinding Target}"
                                          Title="{TemplateBinding Title}"
                                          Name="TeachingTip"
                                          Content="{TemplateBinding Content}"/>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="Border" x:Key="SettingSeparator">
        <Setter Property="Height" Value="1" />
        <Setter Property="HorizontalAlignment" Value="Stretch" />
        <Setter Property="Background" Value="{ThemeResource ApplicationForegroundThemeBrush}" />
        <Setter Property="Opacity" Value="0.3" />
        <Setter Property="BorderThickness" Value="0" />
    </Style>

    <Style TargetType="hcucs:BaseSettingCell" x:Key="BaseSettingCell">
        <Setter Property="Height" Value="40" />
        <Setter Property="Padding" Value="10 0" />
    </Style>

    <Style TargetType="hcucs:BoolSettingCell" x:Key="SwitchSettingCell" BasedOn="{StaticResource BaseSettingCell}">
        <Setter Property="NextVisible" Value="Collapsed" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="hcucs:BoolSettingCell">
                    <Grid Margin="{TemplateBinding Padding}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="auto" />
                        </Grid.ColumnDefinitions>

                        <TextBlock Text="{TemplateBinding Label}"
                                   VerticalAlignment="Center"/>
                        <ToggleSwitch Grid.Column="1"
                                      VerticalAlignment="Center"
                                      Margin="0 0 -100 0"
                                      OnContent=""
                                      OffContent=""
                                      IsOn="{Binding RelativeSource={RelativeSource Mode=TemplatedParent},Path=Value,Mode=TwoWay}"/>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="hcucs:TextSettingCell" x:Key="ButtonSettingCell" BasedOn="{StaticResource BaseSettingCell}">
        <Setter Property="NextVisible" Value="Visible" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="hcucs:TextSettingCell">
                    <Button Style="{ThemeResource LightButtonStyle}"
                            Padding="{TemplateBinding Padding}"
                            HorizontalContentAlignment="Stretch"
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Stretch"
                            VerticalContentAlignment="Stretch">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="auto" />
                                <ColumnDefinition Width="auto" />
                            </Grid.ColumnDefinitions>

                            <TextBlock Text="{TemplateBinding Label}"
                                       VerticalAlignment="Center"/>
                            <TextBlock Text="{TemplateBinding Value}"
                                       Grid.Column="1"
                                       VerticalAlignment="Center"/>
                            <FontIcon FontFamily="{ThemeResource SymbolThemeFontFamily}"
                                      Visibility="{TemplateBinding NextVisible}"
                                      Grid.Column="2"
                                      VerticalAlignment="Center"
                                      Margin="4 0 0 0"
                                      Glyph="&#xE76C;"/>
                        </Grid>
                    </Button>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="htuc:TitleBar">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="htuc:TitleBar">
                    <Grid>
                        <ContentControl Content="{TemplateBinding Content}"
                                HorizontalContentAlignment="Stretch"
                                VerticalContentAlignment="Stretch"
                                HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                        <Rectangle Fill="Transparent"/>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary>
